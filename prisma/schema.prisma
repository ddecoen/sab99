// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Sab99Entry {
  id                    String   @id @default(cuid())
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  
  // Entry Details
  entryNumber          String   @unique
  description          String
  accountingPeriod     String   // e.g., "Q4 2023", "FY 2023"
  discoveryDate        DateTime
  errorOriginPeriod    String   // Period when error originally occurred
  
  // Financial Impact
  monetaryAmount       Float
  accountsAffected     String   // JSON string of affected accounts
  
  // Materiality Assessment
  quantitativeThreshold Float
  quantitativeMaterial  Boolean
  qualitativeFactors   String   // JSON string of qualitative factors
  qualitativeMaterial  Boolean
  overallMateriality   String   // "Material", "Immaterial", "Requires Further Review"
  
  // Out-of-Period Assessment
  isOutOfPeriod        Boolean
  priorPeriodMaterial  Boolean
  currentPeriodMaterial Boolean
  ironCurtainAmount    Float
  rolloverAmount       Float
  
  // Resolution
  resolutionMethod     String   // "Restatement", "Out-of-Period Adjustment", "No Action Required"
  adjustmentEntries    String?  // JSON string of journal entries
  
  // Metadata
  preparedBy          String
  reviewedBy          String?
  approvedBy          String?
  status              String   @default("Draft") // "Draft", "Under Review", "Approved", "Rejected"
  
  // Documentation
  supportingDocuments String?  // JSON string of document references
  notes               String?
  
  @@map("sab99_entries")
}